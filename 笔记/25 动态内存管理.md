# <span style="color:red">动态内存管理</span>



#### **<span style="color:cyan;font-size:24px">更灵活的内存管理方式</span>**

> - <span style="color:#ff00ff;font-size:20px;">malloc：申请动态内存空间</span>
> - <span style="color:#ff00ff;font-size:20px;">free：释放动态内存空间</span>
> - <span style="color:#ff00ff;font-size:20px;">calloc：申请并初始化一系列内存空间</span>
> - <span style="color:#ff00ff;font-size:20px;">realloc：重新分配内存空间</span>

### <span style="color:#c0c9f8;font-size:24px">malloc</span>

- <span style="color:#fff;font-size:20px">函数原型：</span>

  ​	<span style="color:#fff;font-size:20px">— void *malloc(size_t size)</span>

- <span style="color:#fff;font-size:16px">malloc函数向系统内申请分配size个字节的内存空间，并返回一个指向这块内存的指针。</span>

- <span style="color:#fff;font-size:16px">如果函数调用成功，返回的是一个void指针（void *），所以它可以被转换成任何类型的数据；如果函数调用失败，返回值是NULL。另外，如果size参数设置为0，返回值也可能是NULL，但这并不意味着函数调用失败。</span>

### <span style="color:#c0c9f8;font-size:24px">free</span>

- <span style="color:#fff;font-size:20px">函数原型：</span>

  ​	<span style="color:#fff;font-size:20px">— void free(void *ptr)</span>

- <span style="color:#fff;font-size:16px">free函数释放ptr参数指向的内存空间。该内存空间必须是由malloc、calloc、realloc函数申请的。否则，该函数将导致未定义行为。如果ptr参数是NULL，则不执行任何操作。<span style="color:#ffff00">**注意：该函数并不会修改ptr的值，所以调用后它仍然指向原来的地方（变为非法空间）**</span></span>

- 如果申请的动态内存没有及时释放，可能会造成内存泄露（因为C语言没有垃圾回收机制）占用大量内存，直到进程结束；也可能会丢失内存块的地址

- 总结导致内存泄露的主要两种情况

  - — 隐式内存泄露（即用完内存块没有及时使用free函数释放）
  - — 丢失内存块地址

### 

### <span style="color:#c0c9f8;font-size:24px">calloc</span>

- <span style="color:#fff;font-size:20px">函数原型：</span>

  ​	<span style="color:#fff;font-size:20px">— void *malloc(size_t size)</span>

- <span style="color:#fff;font-size:16px">malloc函数向系统内申请分配size个字节的内存空间，并返回一个指向这块内存的指针。</span>

### 

### <span style="color:#c0c9f8;font-size:24px">realloc</span>

- <span style="color:#fff;font-size:20px">函数原型：</span>

  ​	<span style="color:#fff;font-size:20px">— void *malloc(size_t size)</span>

- <span style="color:#fff;font-size:16px">malloc函数向系统内申请分配size个字节的内存空间，并返回一个指向这块内存的指针。</span>

