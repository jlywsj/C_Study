[TOC]



## 指针函数和函数指针

### 指针函数

> 使用指针变量作为函数的返回值，就叫做指针函数。

```c
char* getWord(char c)
{
	switch (c)
	{
	case 'a':	return "Apple";	//返回的字符串存储在静态存储区中,不会随着函数结束而销毁;
	case 'b':	return "Bbnana";
	case 'c':	return "Cat";
	case 'd':	return "Dog";
	default:
		return "None";
	}
}
```

- **不要返回局部变量的指针！！！**
- 因为局部变量的指针所在的内存，在函数执行结束后会被销毁（作用域）

### 函数指针

- 指针函数	—>	int*  p( );
- 函数指针    —>    int  (*p)( [ 参数类型1, ... ]);

```c
#include <stdio.h>
int square(int num,int count)
{
	return num * num;
}
int main()
{
	int num;
	int (*fp)(int,int);	// 定义一个函数指针，声明函数的参数为两个int类型
	printf("请输入一个整数:");
	scanf("%c", &num);
	fp = square;
	printf("%d", num);
	printf("%d * %d = %d\n", num, num, (*fp)(num,1));
	return 0;
}
```

### 参数为函数指针的函数

> 函数指针作为函数的参数

```c
#include <stdio.h>
int add(int num1, int num2)
{
	return num1 + num2;
}
int sub(int num1, int num2)
{
	return num1 + num2;
}
// 参数为函数指针
int calc(int (*p)(int,int),int num1,int num2)
{
	// (*p)(num1,num2)
	return p(num1, num2);
}
int main()
{
	printf("3 + 5 = %d\n", calc(add,3, 5));
	printf("5 - 9 = %d\n", calc(sub, 5, 9));
	return 0;
}
```

