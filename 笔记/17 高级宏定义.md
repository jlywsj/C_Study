## 高级宏定义

### 不带参数的宏定义

```c
#define PI 3.14
```

> - 为了和普通的变量进行区分，宏的名字通常我们约定是全部由大写字母组成
> - 宏定义只是简单地进行替换，并且由于预处理是在编译之前进行，而编译工作的任务之一就是语法检查，所以编译器不会对宏定义进行语法检查
> - 宏定义不是说明语句，在末尾不必加分号
> - 宏定义的作用域是从定义开始的位置到整个程序结束
> - 可以用 `#undef` 来终止宏定义的作用域
> - 宏定义允许嵌套

```c
#include <stdio.h>
#define PI 3.14
#define R 6371  // 地球的半径
#define V PI * R * R * R * 4 / 3  // 宏定义的嵌套求地球的体积

int main(void){
	int r;
	float s;
	printf("请输入圆的半径：0");
	scanf("%d",&r);
#undef PI	// PI的作用域到这里结束
	s = PI * r * r;
	printf("圆的面积是：%.2f\n",s);
	
	return 0;
}
```

### 带参数的宏定义

```c
#include <stdio.h>
#define MAX(x,y) (((x) > (y)) ? (x) : (y) ) // 带参数的宏定义
int main(void){
	int x,y;
	printf("请输入两个证书：");
	scanf("%d%d",x,y);
	printf("较大的数是：%d\n",MAX(x, y));
}
```

> 带参的宏定义中如果进行运算不加括号时应该注意：
>
> ​		调用带参宏定义时，形参会直接被实参给替换，不会进行运算之后再替换如下：
>
> ```c
> #define SQUARE(x) x * x
> // 调用时
> SQUARE(x+1);
> // 实际上运算时
> SQUARE(x+1) x + 1 * x + 1;  // 就会出错 先计算 1*x
> ```
>
> 